(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(15),c=t.n(o),r=t(6),a=t(3),u=t(2),s=t(4),i=t.n(s),l="/api/persons",d={getAll:function(){return i.a.get(l).then((function(e){return e.data}))},create:function(e){return i.a.post(l,e).then((function(e){return e.data}))},update:function(e,n){return console.log("personsjs id",e),i.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},f=(t(38),t(0)),h=function(e){var n=e.message,t=e.messageStyle;return null===n?null:Object(f.jsx)("div",{className:t,children:n})},b=function(e){return Object(f.jsx)("button",{onClick:e.onClick,children:e.text})},j=function(e){var n=e.person,t=e.handleRemove;return Object(f.jsxs)("li",{children:[n.name," ",n.number," ",Object(f.jsx)(b,{onClick:function(){t(n.id)},text:"delete"})]})},m=function(e){var n=e.showAll,t=e.handleFilter;return Object(f.jsxs)("p",{children:["filter shown with ",Object(f.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.addName,t=e.newName,o=e.handleNewName,c=e.newNumber,r=e.handleNewNumber;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:t,onChange:o})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:c,onChange:r})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.contactsToShow,t=e.handleRemove;return console.log("contactstoshow",n),Object(f.jsx)("ul",{style:{listStyle:"none",padding:"0px"},children:n.map((function(e){return Object(f.jsx)(j,{person:e,handleRemove:t},e.id)}))})},v=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(u.useState)(""),s=Object(a.a)(c,2),i=s[0],l=s[1],b=Object(u.useState)(""),j=Object(a.a)(b,2),v=j[0],g=j[1],w=Object(u.useState)(""),x=Object(a.a)(w,2),N=x[0],S=x[1],k=Object(u.useState)(null),C=Object(a.a)(k,2),y=C[0],T=C[1],A=Object(u.useState)(null),R=Object(a.a)(A,2),L=R[0],D=R[1];Object(u.useEffect)((function(){d.getAll().then((function(e){console.log("initialpersons",e),o(e)})).catch((function(e){console.log("fetchdata",e)}))}),[]),console.log("render",t.length,"persons");var E=function(e){console.log("checkDuplicate",e),console.log("duplicate persons",t);var n=t.find((function(n){return n.name.toLowerCase()===e.name.toLowerCase()}));if(n){if(window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))){var c=n.id;console.log("id",c);var a=Object(r.a)(Object(r.a)({},n),{},{number:e.number});d.update(c,a).then((function(e){o(t.map((function(n){return n.id!==c?n:e}))),l(""),g(""),D("success"),T("Changed ".concat(a.name,"'s number to ").concat(a.number)),setTimeout((function(){T(null)}),3e3)})).catch((function(e){D("error"),T("".concat(e.response.data.error)),setTimeout((function(){T(null)}),3e3)}))}}else l(""),g("");return void 0!==n},F=t.filter((function(e){return e.name.toLowerCase().includes("".concat(N).toLowerCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(h,{message:y,messageStyle:L}),Object(f.jsx)(m,{showAll:N,handleFilter:function(e){S(e.target.value)}}),Object(f.jsx)("h2",{children:"Add new contact"}),Object(f.jsx)(O,{newName:i,newNumber:v,addName:function(e){e.preventDefault(),console.log("button clicked",e.target);var n={name:i,number:v};E(n)||(console.log("personObject",n),d.create(n).then((function(e){o(t.concat(e)),l(""),g(""),D("success"),T("Added ".concat(i," to the phonebook")),setTimeout((function(){T(null)}),3e3)})).catch((function(e){D("error"),T("".concat(e.response.data.error)),setTimeout((function(){T(null)}),3e3)}))),console.log("persons",t)},handleNewName:function(e){l(e.target.value)},handleNewNumber:function(e){g(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(p,{contactsToShow:F,handleRemove:function(e){console.log("handleREmove",e);var n=t.filter((function(n){return n.id===e}));console.log("persons",t),console.log("person",n[0].name),window.confirm("Delete ".concat(n[0].name,"?"))&&d.remove(e).then((function(){D("success"),T("Removed ".concat(n[0].name," from the phonebook")),setTimeout((function(){T(null)}),3e3),o(t.filter((function(n){return n.id!==e})))})).catch((function(c){console.log("error removing",c),D("error"),T("Information of ".concat(n[0].name," has already been removed from the server")),setTimeout((function(){T(null)}),3e3),o(t.filter((function(n){return n.id!==e})))}))}})]})};c.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.94f13b13.chunk.js.map