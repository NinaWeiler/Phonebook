(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(15),c=t.n(o),a=t(6),r=t(3),u=t(2),l=t(4),s=t.n(l),i="/api/persons",d={getAll:function(){return s.a.get(i).then((function(e){return e.data}))},create:function(e){return s.a.post(i,e).then((function(e){return e.data}))},update:function(e,n){return s.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return s.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))}},h=(t(38),t(0)),b=function(e){var n=e.message,t=e.messageStyle;return null===n?null:Object(h.jsx)("div",{className:t,children:n})},f=function(e){return Object(h.jsx)("button",{onClick:e.onClick,children:e.text})},j=function(e){var n=e.person,t=e.handleRemove;return Object(h.jsxs)("li",{children:[n.name," ",n.number," ",Object(h.jsx)(f,{onClick:function(){t(n.id)},text:"delete"})]})},m=function(e){var n=e.showAll,t=e.handleFilter;return Object(h.jsxs)("p",{children:["filter shown with ",Object(h.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.addName,t=e.newName,o=e.handleNewName,c=e.newNumber,a=e.handleNewNumber;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:t,onChange:o})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:c,onChange:a})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.contactsToShow,t=e.handleRemove;return console.log("contactstoshow",n),Object(h.jsx)("ul",{style:{listStyle:"none",padding:"0px"},children:n.map((function(e){return Object(h.jsx)(j,{person:e,handleRemove:t},e.id)}))})},v=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],o=n[1],c=Object(u.useState)(""),l=Object(r.a)(c,2),s=l[0],i=l[1],f=Object(u.useState)(""),j=Object(r.a)(f,2),v=j[0],g=j[1],w=Object(u.useState)(""),x=Object(r.a)(w,2),N=x[0],S=x[1],C=Object(u.useState)(null),k=Object(r.a)(C,2),y=k[0],A=k[1],R=Object(u.useState)(null),T=Object(r.a)(R,2),L=T[0],D=T[1];Object(u.useEffect)((function(){d.getAll().then((function(e){console.log("initialpersons",e),o(e)})).catch((function(e){console.log("fetchdata",e)}))}),[]),console.log("render",t.length,"persons");var E=function(e){console.log("checkDuplicate",e),console.log("duplicate persons",t);var n=t.find((function(n){return n.name.toLowerCase()===e.name.toLowerCase()}));if(n){if(window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))){var c=n.id,r=Object(a.a)(Object(a.a)({},n),{},{number:e.number});d.update(c,r).then((function(e){o(t.map((function(n){return n.id!==c?n:e}))),i(""),g(""),D("success"),A("Changed ".concat(r.name,"'s number to ").concat(r.number)),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.log("failed to update",e)}))}}else i(""),g("");return void 0!==n},F=t.filter((function(e){return e.name.toLowerCase().includes("".concat(N).toLowerCase())}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(b,{message:y,messageStyle:L}),Object(h.jsx)(m,{showAll:N,handleFilter:function(e){S(e.target.value)}}),Object(h.jsx)("h2",{children:"Add new contact"}),Object(h.jsx)(O,{newName:s,newNumber:v,addName:function(e){e.preventDefault(),console.log("button clicked",e.target);var n={name:s,number:v};E(n)||(console.log("personObject",n),d.create(n).then((function(e){o(t.concat(e)),i(""),g(""),D("success"),A("Added ".concat(s," to the phonebook")),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.log("addName",e)}))),console.log("persons",t)},handleNewName:function(e){i(e.target.value)},handleNewNumber:function(e){g(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(p,{contactsToShow:F,handleRemove:function(e){console.log("handleREmove",e);var n=t.filter((function(n){return n.id===e}));console.log("persons",t),console.log("person",n[0].name),window.confirm("Delete ".concat(n[0].name,"?"))&&d.remove(e).then((function(){o(t.filter((function(n){return n.id!==e})))})).catch((function(c){console.log("error removing",c),D("error"),A("Information of ".concat(n[0].name," has already been removed from the server")),setTimeout((function(){A(null)}),3e3),o(t.filter((function(n){return n.id!==e})))}))}})]})};c.a.render(Object(h.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f4d91990.chunk.js.map